<!DOCTYPE html>

<!-- EJS for left table -->
<% function drinkprices(user) { %>
  <% for(var i=0; i<user.drinks.length; i++) { %>
        <tr>
          <td><%= user.drinks[i].drink %></td>
          <td>Small<br>
              Medium<br>
              Large</td>
          <td>$3.42<br>
              $2.45<br>
              $5.65</td>
        </tr>
  <% } %> 
<% } %>

<!-- EJS for dynamic table on home page -->
<% function locationinfo(user) { %>
  <% for(var i=0; i<user.locations.length; i++) { if(i==0){ %>
    <tr>
      <!-- Switch between open/closed on random boolean value -->
        <% var randomNumber = Math.random() >= 0.5; %> <!-- Generates true or false (random) -->
        <% if (randomNumber == true) { %>
            <td><image src="/img/Icons/open.png" width="15" height="15" align="center"></td> 
          <% } else { %>
            <td><image src="/img/Icons/closed.png" width="15" height="15" align="center"></td>
          <% } %>
        <td><a href="http://<%= user.website %>"> <%= user.display_name%></a>,  <%= user.locations[i].location_name %> </td>
        <td> <%= user.locations[i].address %></td>
           <td>  <div class="shop-rating raw-rating"><%= user.rating.yelp_rating %></div> </td> <!-- Rating -->
        <!--<td> <img src="/img/Rating/coffeemed.jpg"></td>-->
        <td>% <%= user.avg_price %></td>
    </tr>
  <% } } %>
<% } %>

    <!-- EJS include header -->
    <% include /boiler/header.ejs %>

      <!-- Path breadcrumb -->
      <ul class="breadcrumb">
        &nbsp;&nbsp;<li><a href="#">Home</a> <span></span>n class="divider">/</span></li>
        <li><a href="#">Shops</a> <span class="divider">/</span></li>
        <li class="active">Balzac's</li>
      </ul>

      <!-- Left table (#1)-->
      <div class="span12">
        <!-- Styled Table insertion -->
        <table id="hor-minimalist-a" summary="Front Page Coffeeshops">
          <thead>
          <tr>
            <th style="width: 5%">&nbsp;Drink</th>
            <th style="width: 30%">Sizes</th>
            <th style="width: 30%">Price</th>
          </tr>
          <!-- Map users array to user for EJS -->  
          <!-- <% users.map(drinkprices) %>-->
          <% drinkprices(users[0]) %>
        </table>
      </div> 

      <!-- Right Table (#2)-->
      <div class="span12">
        <!-- Styled Table insertion -->
        <table id="hor-minimalist-a" summary="Coffeeshop detail">
          <thead>
          <tr>
            <th style="width: 5%">Location #</th>
            <th style="width: 30%">Company Name</th>
            <th style="width: 30%">Location Name</th>
            <th style="width: 10%; padding:5px">Rating</th>
            <th style="width: 20%; padding:5px">Difference from<br>Average Price</th>
          </tr>
          <!-- Map users array to user for EJS -->
          <% users.map(locationinfo) %>
        </table>
      </div> 

      <!-- Well used for displaying tag data -->
      <div class="well well-large">
      </div>

    <!-- EJS include footer -->
    <% include /boiler/footer.ejs %>
    <!-- EJS include scripts -->
    <% include /boiler/scripts.ejs %>
  </body>
</html>